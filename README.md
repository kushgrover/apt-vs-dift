# apt-vs-dift

Extension of the project PRISM-games [https://github.com/prismmodelchecker/prism-games] with the algorithms as described in CDC submission "Guaranteed Trade-Offs in Dynamic Information Flow Tracking Games".

## License:

For our modifications of the code, we give an MIT license. For the code that was originally part of PRISM-games, we refer to their license file in src/prism-games/COPYING.txt and the "Licensing" section of their README in src/prism-games/README.md (and the same files in the prism-fruit directory).

## Organization:

- The folder final-plots contains the plots as they are used in Figure 4 of the paper for all case studies.
- The folders examples and props contain the case study files.
- The folder results contains all the results, including intermediate files we have to generate and final plots.
- The folder src contains our code, specifically two versions of PRISM-games: 
  1) The code for simulating models and estimating the probabilities in prism-fruit (extension of the code of this paper https://link.springer.com/chapter/10.1007%2F978-3-030-25540-4_29)
  2) The code for computing the Pareto frontier (which is the border of the set of achievable vectors) of a turn-based SG in prism-games.

To run the code and recreate the results, first install both prism-fruit as well as prism-games (the process is the same for both) and then run results.sh.

## Installation
We provide the script install.sh, which installs everything, given correct rights and configuration.  
`sudo ./install.sh`

Should this not work, the instructions below can be used for step by step installation.

### Dependencies and step-by-step instructions
- Update package cache  
  `sudo apt-get -y update`  
- Java 8  
  `sudo apt install openjdk-8-jdk`  
- Python 3.7 or more recent with matplotlib, scipy, numpy and pandas  
  `sudo apt install python3 python3-pip`  
  `pip3 install matplotlib scipy numpy pandas`  
- PPL  
  `sudo apt install gcc g++ make libgmp-dev m4`  
  Download PPL in lib folder  
    `mkdir lib`  
    `cd lib`  
    `wget http://www.bugseng.com/products/ppl/download/ftp/releases/1.2/ppl-1.2.tar.gz`  
    `tar xfz ppl-1.2.tar.gz`  
    `cd ppl-1.2`  
  For the next step make sure that Java 8 is selected by default.  
    `./configure --enable-interfaces=java`  
    `make`  
    `sudo make install`  
    `cd ../../`  
- PRISM-Games (https://prismmodelchecker.org/games/installation.php)  
  `cd src/prism-games/prism`  
  `make PPL_DIR=/usr/local/lib`  
Run test to check if everything was installed properly  
  `make test testppl`  
- Prism-Fruit  
  `cd ../../prism-fruit/Games-DQL/`  
  `make PPL_DIR=/usr/local/lib`  

**We assume that you are using a Linux distribution.** For Windows and Mac OS users the guides we refer to also provide instructions, but you may encounter difficulties putting everything together.

## Executing the code

**Running it on an random example**
Run the script ./run.sh  
`./run.sh 1 10`  
10 is the size of the generated random graph  

**Running it on a model generated by a matrix given in .csv format**  
`./run.sh 2 examples/screen_grab/screen_grab.csv`

**Generating all results in the results folder**  
`./results.sh`
